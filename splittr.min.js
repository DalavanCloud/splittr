//    Part of the Splittr Library
//       (C) 2013 Shane Carr
//   Released under the X11 License
// https://github.com/vote539/splittr
!function(t){"function"==typeof define&&define.amd?define(["splittr"],t):window.splittr=t()}(function(){var t={};return t.barBreadth=5,t.init=function(){var e=/^(horizontal|vertical) (static|dynamic) ((?:\d+ ?)+)$/;t.util.get(document,function(){var i=this.getAttribute("data-splittr");if(!i)return!1;var n=this,l=e.exec(i);if(!l)throw new Error("Splittr: Invalid options string.  (Read '"+i+"')");var r="vertical"===l[1],s="dynamic"===l[2],o=l[3].split(" "),f=document.createElement("div");r?f.setAttribute("class","splittr-bar-container splittr-bar-container-vertical"):f.setAttribute("class","splittr-bar-container splittr-bar-container-horizontal");var a=0,p=[],h=t.util.children(n,function(e){var i=this,n=parseInt(o[e])||0;if(this.collapsible=null!==this.getAttribute("data-splittr-collapsible"),e>0){var l=t.util.makeBar(r,s,a);f.appendChild(l),p.push(l),a+=t.barBreadth}r?(i.style.left=a+"px",i.style.width=n+"px",a+=n):(i.style.top=a+"px",i.style.height=n+"px",a+=n)},!0);n.appendChild(f);var d=h[h.length-1];r?(d.style.width="auto",d.style.right=0):(d.style.height="auto",d.style.bottom=0);for(var u=p.length-1;u>=0;u--){var v=p[u],c=h[u],x=h[u+1];s&&(t.util.handleMouseEvents(v,c,x,r,u===p.length-1),c.collapsible&&v.addCollapse(!0,r,c,x,u===p.length-1),x.collapsible&&v.addCollapse(!1,r,c,x,u===p.length-1)),c.next=x,x.prev=c,v.next=x,v.prev=c,c.nextBar=v,x.prevBar=v}t.util.handleWindowResizeEvent(n,h,r)},!1)},t.resize=function(e,i,n){var l=e.parentNode.getAttribute("data-splittr");if(null===l)throw new Error("Splittr: Attempted to resize an uninitialized element.");var r=0===l.indexOf("vertical"),s=r?e.offsetWidth:e.offsetHeight,o=i-s;if(n){if(!e.prev)throw new Error("Splittr: Must have previous panel (anchor next)");r?(e.prev.style.width=e.prev.offsetWidth-o+"px",e.prevBar.style.left=e.prevBar.offsetLeft-o+"px",e.style.left=e.offsetLeft-o+"px",e.style.width=i+"px"):(e.prev.style.height=e.prev.offsetHeight-o+"px",e.prevBar.style.top=e.prevBar.offsetTop-o+"px",e.style.top=e.offsetTop-o+"px",e.style.height=i+"px")}else{if(!e.next)throw new Error("Splittr: Must have next panel (anchor prev)");var f=!e.next.next;r?(f||(e.next.style.width=e.next.offsetWidth-o+"px"),e.next.style.left=e.next.offsetLeft+o+"px",e.nextBar.style.left=e.nextBar.offsetLeft+o+"px",e.style.width=i+"px"):(f||(e.next.style.height=e.next.offsetHeight-o+"px"),e.next.style.top=e.next.offsetTop+o+"px",e.nextBar.style.top=e.nextBar.offsetTop+o+"px",e.style.height=i+"px")}t.util.dispatchSplittrMove(e.parentNode,e.prev,e.next),t.util.dispatchSplittrDone(e.parentNode,e.prev,e.next)},t.util={},t.util.copy=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},t.util.get=function(e,i,n){var l=e.getElementsByTagName("*");return n&&(l=t.util.copy(l)),t.util._elements(l,i)},t.util._elements=function(t,e){for(var i=[],n=0,l=0;l<t.length;l++){var r=t[l];1===r.nodeType&&(e&&e.call(r,n++)===!1||i.push(r))}return i},t.util.children=function(e,i,n){var l=e.childNodes;return n&&(l=t.util.copy(l)),t.util._elements(l,i)},t.util.makeBar=function(e,i,n){var l=document.createElement("div"),r="splittr-bar";return e?(r+=" splittr-bar-vertical",l.style.width=t.barBreadth+"px",l.style.left=n+"px"):(r+=" splittr-bar-horizontal",l.style.height=t.barBreadth+"px",l.style.top=n+"px"),i&&(r+=" splittr-bar-dynamic"),l.setAttribute("class",r),l.addCollapse=function(e,i,n,r,s){var o=document.createElement("div");o.setAttribute("class","splittr-handle-container");var f=document.createElement("div");f.setAttribute("class",e?"splittr-handle-prev":"splittr-handle-next");var a=e?i?"\u25C0":"\u25B2":i?"\u25B6":"\u25BC";f.appendChild(document.createTextNode(a)),f.addEventListener("click",function(){e?i?(l.style.left=l.offsetLeft-n.offsetWidth+"px",r.style.left=l.offsetLeft+l.offsetWidth+"px",s||(r.style.width=r.offsetWidth+n.offsetWidth+"px"),n.style.width=0):(l.style.top=l.offsetTop-n.offsetHeight+"px",r.style.top=l.offsetTop+l.offsetHeight+"px",s||(r.style.height=r.offsetHeight+n.offsetHeight+"px"),n.style.height=0):i?(l.style.left=l.offsetLeft+r.offsetWidth+"px",r.style.left=r.offsetLeft+r.offsetWidth+"px",n.style.width=n.offsetWidth+r.offsetWidth+"px",s||(r.style.width=0)):(l.style.top=l.offsetTop+r.offsetHeight+"px",r.style.top=r.offsetTop+r.offsetHeight+"px",n.style.height=n.offsetHeight+r.offsetHeight+"px",s||(r.style.height=0)),t.util.dispatchSplittrMove(l.parentNode.parentNode,n,r)},!1),o.appendChild(f),l.appendChild(o)},l},t.util.getTotalOffsetTop=function(t){var e=0;do e+=t.offsetTop;while(t=t.offsetParent);return e},t.util.getTotalOffsetLeft=function(t){var e=0;do e+=t.offsetLeft;while(t=t.offsetParent);return e},t.util.handleMouseEvents=function(e,i,n,l,r){var s,o,f,a,p,h=null;e.addEventListener("mousedown",function(t){t.preventDefault(),h=l?t.clientX:t.clientY,s=l?e.offsetLeft:e.offsetTop,a=l?i.offsetWidth:i.offsetHeight,p=l?n.offsetWidth:n.offsetHeight,o=0-a,f=p},!1),window.addEventListener("mousemove",function(d){if(null!==h){d.preventDefault();var u=l?d.clientX:d.clientY,v=u-h;o>v&&(v=o),v>f&&(v=f),l?(e.style.left=s+v+"px",i.style.width=a+v+"px",n.style.left=s+v+t.barBreadth+"px",r||(n.style.width=p-v+"px")):(e.style.top=s+v+"px",i.style.height=a+v+"px",n.style.top=s+v+t.barBreadth+"px",r||(n.style.height=p-v+"px")),t.util.dispatchSplittrMove(n.parentNode,i,n)}},!1),window.addEventListener("mouseup",function(){null!==h&&(h=null,t.util.dispatchSplittrDone(n.parentNode,i,n))},!1)},t.util.handleWindowResizeEvent=function(t,e,i){var n=t.offsetWidth,l=t.offsetHeight;window.addEventListener("resize",function(){var e=t.offsetWidth,r=t.offsetHeight;if(i&&e!==n);else if(!i&&r!==l);})},t.util.dispatchSplittrMove=function(t,e,i){var n=document.createEvent("Event");n.initEvent("splittrMove",!0,!0),n.prev=e,n.next=i,t.dispatchEvent(n)},t.util.dispatchSplittrDone=function(t,e,i){var n=document.createEvent("Event");n.initEvent("splittrDone",!0,!0),n.prev=e,n.next=i,t.dispatchEvent(n)},t});