//    Part of the Splittr Library
//       (C) 2013 Shane Carr
//   Released under the X11 License
// https://github.com/vote539/splittr

window.splittr={};window.splittr.barBreadth=5;
window.splittr.init=function(){var a=/^(horizontal|vertical) (static|dynamic) ((?:\d+ ?)+)$/;window.splittr.util.get(document,function(){var c=this.getAttribute("data-splittr");if(!c)return!1;var b=a.exec(c);if(!b)throw Error("Splittr: Invalid options string.  (Read '"+c+"')");var d="vertical"===b[1],e="dynamic"===b[2],h=b[3].split(" "),m=document.createElement("div");m.setAttribute("class","splittr-bar-container");var j=0,k=[],c=window.splittr.util.children(this,function(a){var b=parseInt(h[a])||
0;this.collapsible=null!==this.getAttribute("data-splittr-collapsible");0<a&&(a=window.splittr.util.makeBar(d,e,j),m.appendChild(a),k.push(a),j+=window.splittr.barBreadth);d?(this.style.left=j+"px",this.style.width=b+"px"):(this.style.top=j+"px",this.style.height=b+"px");j+=b},!0);this.appendChild(m);b=c[c.length-1];d?(b.style.width="auto",b.style.right=0,b.style.width=b.offsetWidth+"px"):(b.style.height="auto",b.style.bottom=0,b.style.height=b.offsetHeight+"px");for(b=k.length-1;0<=b;b--){var g=
k[b],f=c[b],l=c[b+1];e&&(window.splittr.util.handleMouseEvents(g,f,l,d),f.collapsible&&g.addCollapse(!0,d,f,l),l.collapsible&&g.addCollapse(!1,d,f,l));f.next=l;l.prev=f;g.next=l;g.prev=f;f.nextBar=g;l.prevBar=g}},!1)};
window.splittr.resize=function(a,c,b){var d=a.parentNode.getAttribute("data-splittr");if(null===d)throw Error("Splittr: Attempted to resize an uninitialized element.");var d=0===d.indexOf("vertical"),e=c-(d?a.offsetWidth:a.offsetHeight);if(b){if(!a.prev)throw Error("Splittr: Must have previous panel (anchor next)");d?(a.prev.style.width=a.prev.offsetWidth-e+"px",a.prevBar.style.left=a.prevBar.offsetLeft-e+"px",a.style.left=a.offsetLeft-e+"px",a.style.width=c+"px"):(a.prev.style.height=a.prev.offsetHeight-
e+"px",a.prevBar.style.top=a.prevBar.offsetTop-e+"px",a.style.top=a.offsetTop-e+"px",a.style.height=c+"px")}else{if(!a.next)throw Error("Splittr: Must have next panel (anchor prev)");d?(a.next.style.width=a.next.offsetWidth-e+"px",a.next.style.left=a.next.offsetLeft+e+"px",a.nextBar.style.left=a.nextBar.offsetLeft+e+"px",a.style.width=c+"px"):(a.next.style.height=a.next.offsetHeight-e+"px",a.next.style.top=a.next.offsetTop+e+"px",a.nextBar.style.top=a.nextBar.offsetTop+e+"px",a.style.height=c+"px")}window.splittr.util.dispatchSplitterMove(a.parentNode,
a.prev,a.next);window.splittr.util.dispatchSplitterDone(a.parentNode,a.prev,a.next)};window.splittr.util={};window.splittr.util.copy=function(a){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c};window.splittr.util.get=function(a,c,b){a=a.getElementsByTagName("*");b&&(a=window.splittr.util.copy(a));return window.splittr.util._elements(a,c)};
window.splittr.util._elements=function(a,c){var b=[],d=0,e;for(e in a)if(a.hasOwnProperty(e)){var h=a[e];1===h.nodeType&&(!c||!1!==c.call(h,d++))&&b.push(h)}return b};window.splittr.util.children=function(a,c,b){a=a.childNodes;b&&(a=window.splittr.util.copy(a));return window.splittr.util._elements(a,c)};
window.splittr.util.makeBar=function(a,c,b){var d=document.createElement("div"),e="splittr-bar";a?(e+=" splittr-bar-vertical",d.style.width=window.splittr.barBreadth+"px",d.style.left=b+"px"):(e+=" splittr-bar-horizontal",d.style.height=window.splittr.barBreadth+"px",d.style.top=b+"px");c&&(e+=" splittr-bar-dynamic");d.setAttribute("class",e);d.addCollapse=function(a,b,c,e){var g=document.createElement("div");g.setAttribute("class","splittr-handle-container");var f=document.createElement("div");f.setAttribute("class",
a?"splittr-handle-prev":"splittr-handle-next");f.appendChild(document.createTextNode(a?b?"\u25c0":"\u25b2":b?"\u25b6":"\u25bc"));f.addEventListener("click",function(){a?b?(d.style.left=d.offsetLeft-c.offsetWidth+"px",e.style.left=d.offsetLeft+d.offsetWidth+"px",e.style.width=e.offsetWidth+c.offsetWidth+"px",c.style.width=0):(d.style.top=d.offsetTop-c.offsetHeight+"px",e.style.top=d.offsetTop+d.offsetHeight+"px",e.style.height=e.offsetHeight+c.offsetHeight+"px",c.style.height=0):b?(d.style.left=d.offsetLeft+
e.offsetWidth+"px",e.style.left=e.offsetLeft+e.offsetWidth+"px",c.style.width=c.offsetWidth+e.offsetWidth+"px",e.style.width=0):(d.style.top=d.offsetTop+e.offsetHeight+"px",e.style.top=e.offsetTop+e.offsetHeight+"px",c.style.height=c.offsetHeight+e.offsetHeight+"px",e.style.height=0);window.splittr.util.dispatchSplitterMove(d.parentNode.parentNode,c,e)},!1);g.appendChild(f);d.appendChild(g)};return d};
window.splittr.util.getTotalOffsetTop=function(a){var c=0;do c+=a.offsetTop;while(a=a.offsetParent);return c};window.splittr.util.getTotalOffsetLeft=function(a){var c=0;do c+=a.offsetLeft;while(a=a.offsetParent);return c};
window.splittr.util.handleMouseEvents=function(a,c,b,d){var e=null,h,m,j,k,g;a.addEventListener("mousedown",function(f){f.preventDefault();e=d?f.clientX:f.clientY;h=d?a.offsetLeft:a.offsetTop;k=d?c.offsetWidth:c.offsetHeight;g=d?b.offsetWidth:b.offsetHeight;m=0-k;j=g},!1);window.addEventListener("mousemove",function(f){null!==e&&(f.preventDefault(),f=(d?f.clientX:f.clientY)-e,f<m&&(f=m),f>j&&(f=j),d?(a.style.left=h+f+"px",c.style.width=k+f+"px",b.style.left=h+f+window.splittr.barBreadth+"px",b.style.width=
g-f+"px"):(a.style.top=h+f+"px",c.style.height=k+f+"px",b.style.top=h+f+window.splittr.barBreadth+"px",b.style.height=g-f+"px"),window.splittr.util.dispatchSplitterMove(b.parentNode,c,b))},!1);window.addEventListener("mouseup",function(){null!==e&&(e=null,window.splittr.util.dispatchSplitterDone(b.parentNode,c,b))},!1)};window.splittr.util.dispatchSplitterMove=function(a,c,b){var d=document.createEvent("Event");d.initEvent("splitterMove",!0,!0);d.prev=c;d.next=b;a.dispatchEvent(d)};
window.splittr.util.dispatchSplitterDone=function(a,c,b){var d=document.createEvent("Event");d.initEvent("splitterDone",!0,!0);d.prev=c;d.next=b;a.dispatchEvent(d)};
